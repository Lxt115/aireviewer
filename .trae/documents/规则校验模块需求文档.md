# 规则校验模块产品需求文档

## 1. 功能概述
规则校验模块是一个用于验证文档内容是否符合特定规则的智能工具。用户可以通过输入规则描述、上传相关文档，利用AI技术优化规则并执行校验，最终获得清晰的审核结果。

## 2. 用户目标
- 能够清晰地定义文档审核规则
- 利用AI能力优化规则描述，提高审核准确性
- 便捷地上传待审核文件和参考材料
- 获得准确、可解释的审核结果

## 3. 核心功能流程

### 3.1 规则描述输入
**功能说明**：用户可以输入自然语言的规则描述，说明需要审核的内容和标准。

**界面设计**：
- 提供一个多行文本输入框，支持至少500个字符
- 输入框上方有明确的标题“规则描述”
- 提供示例提示，引导用户输入有效的规则描述

**示例输入**：
> 结合关联文档的《巡察整改台账》的【问题描述】信息，判断《整改方案》的整改任务中具体问题是否有缺漏

### 3.2 文档上传
**功能说明**：用户需要上传待审核文件和相关参考材料，用于规则校验。

**界面设计**：
- 分两个区域：待审核文件、参考材料
- 每个区域提供文件上传按钮，支持多选文件
- 显示已上传文件列表，包含文件名、上传状态
- 支持删除已上传的文件

### 3.3 AI优化功能
**功能说明**：用户可以点击【AI优化】按钮，系统会根据输入的规则描述和预置提示词，通过大模型生成更清晰、更有效的规则提示词。

**界面设计**：
- 在规则描述输入框下方提供【AI优化】按钮
- 优化过程中显示加载状态
- 优化结果直接显示在可编辑的文本框中

**优化效果示例**：
> 原始输入：“结合关联文档的《巡察整改台账》的【问题描述】信息，判断《整改方案》的整改任务中具体问题是否有缺漏”

> 优化后：
> 1. 提取《整改方案》中“整改任务”章节的【问题*】描述；（文档中有多个问题）
> 2. 提取《巡察整改台账》中的【二级问题】描述；（文档中有多个问题）
> 3. 利用大模型能力，判断从两个文档中提取的问题描述，是否有缺漏或描述不一致的

### 3.4 提示词编辑
**功能说明**：用户可以对AI优化后的提示词进行进一步编辑，以获得更符合需求的最终提示词。

**界面设计**：
- 提供一个多行文本编辑框，显示AI优化后的提示词
- 编辑框支持格式化功能（如换行、缩进）
- 实时显示剩余可输入字符数

### 3.5 规则校验执行
**功能说明**：用户点击【开始校验】按钮后，系统会根据最终的提示词对上传的文档进行校验。

**界面设计**：
- 提供醒目的【开始校验】按钮，位于界面下方
- 校验过程中显示加载动画和进度提示
- 校验完成后显示结果统计信息（如通过率、总文件数）

### 3.6 校验结果展示
**功能说明**：系统会显示每个待审核文件的校验结果，并提供详细的审核理由。

**界面设计**：
- 以卡片形式展示每个文件的校验结果
- 结果状态分为：通过、不通过
- 提供展开/收起按钮，点击可查看详细的审核理由列表
- 理由列表采用清晰的条目式布局

**结果示例**：
> 文件：《整改方案示例.docx》
> 结果：不通过
> 理由：
> 1. 《整改方案》中未包含《巡察整改台账》中的第2条二级问题
> 2. 《整改方案》中的第3条问题描述与《巡察整改台账》中的对应问题存在不一致

## 4. 界面布局设计

### 4.1 整体布局
- 采用左右分栏布局：左侧为功能操作区，右侧为结果展示区
- 功能操作区包含：规则描述输入、AI优化、文档上传
- 结果展示区包含：校验结果列表、详细理由

### 4.2 交互设计原则
- 操作流程清晰，符合用户直觉
- 关键按钮醒目，易于点击
- 状态反馈及时，避免用户等待焦虑
- 错误提示友好，提供明确的解决方案

### 4.3 视觉设计要求
- 采用简洁、专业的设计风格
- 主色调使用蓝色系，传达信任和专业感
- 辅助色用于区分不同状态（通过-绿色，不通过-红色）
- 字体清晰易读，层次分明
- 间距合理，避免界面拥挤

## 5. 技术要求

### 5.1 AI能力集成
- 与大语言模型API集成，实现规则优化功能
- 支持上下文理解，能够结合参考文档内容进行校验

### 5.2 文件处理能力
- 支持常见文档格式（Word、PDF、Excel等）
- 能够提取文档结构化内容
- 支持大文件上传（最大100MB）

### 5.3 性能要求
- 规则优化响应时间不超过5秒
- 文档校验时间根据文件大小动态调整，最大不超过30秒
- 支持同时处理最多10个文件

## 6. 验收标准

### 6.1 功能完整性
- 所有核心功能均可正常使用
- 流程无断点，用户可完成完整的规则校验

### 6.2 界面美观性
- 符合设计规范，界面简洁大方
- 交互流畅，无卡顿现象

### 6.3 结果准确性
- AI优化后的提示词确实提高了规则的清晰度和有效性
- 校验结果准确，理由充分合理

### 6.4 稳定性
- 系统运行稳定，无崩溃现象
- 异常情况处理得当，错误提示清晰